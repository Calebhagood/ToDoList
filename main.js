(()=>{"use strict";const e="task.myProjects",t="task.selectedProjectId";let n=JSON.parse(localStorage.getItem(e))||[],a=localStorage.getItem(t);function r(){localStorage.setItem(e,JSON.stringify(n)),localStorage.setItem(t,a)}function o(){r(),y()}const d=document.querySelector("[data-task-display-container]"),c=document.querySelector("[data-list-title]"),l=document.querySelector("[data-list-count]"),i=document.querySelector("[data-tasks]"),s=document.querySelector("[data-add-task-button]"),u=document.querySelector("[data-clear-complete-tasks-button"),m=document.getElementById("task-template");let p=document.querySelector("#createdProjects");function y(){S(p),n.forEach((e=>{const t=document.createElement("li");t.dataset.projectId=e.id,t.setAttribute("class","projectItem"),t.innerText=e.name,e.id===a&&t.classList.add("selected"),p.appendChild(t)})),p.addEventListener("click",(e=>{"li"===e.target.tagName.toLowerCase()&&(a=e.target.dataset.projectId,o())}));const e=n.find((e=>e.id===a));null==a?(d.style.display="none",s.style.display="none",u.style.display="none"):(d.style.display="",s.style.display="",u.style.display="",c.innerText=e.name,k(e),S(i),function(e){e.tasks.forEach((e=>{const t=document.importNode(m.content,!0),n=t.querySelector("#templateTaskDiv"),a=t.querySelector(".checkbox");a.id=e.id,a.checked=e.complete,t.querySelector(".title").append(e.name),t.querySelector(".description").append(e.description),t.querySelector(".dueDate").append(e.dueDate),t.querySelector(".priority").append(e.priority),"Low"===e.priority?n.classList.add("Low"):"Medium"===e.priority?n.classList.add("Medium"):"High"===e.priority&&n.classList.add("High"),i.appendChild(t)}))}(e))}function k(e){const t=e.tasks.filter((e=>!e.complete)).length,n=1===t?"task":"tasks";l.innerText=`${t} ${n} remaining`}function S(e){for(;e.firstChild;)e.removeChild(e.firstChild)}const q=document.querySelector("[data-new-project-form]"),v=document.querySelector("[data-new-project-input]"),f=document.querySelector("[data-delete-project-button]"),L=document.querySelector("[data-new-task-form]"),g=document.querySelector("[data-new-task-title-input]"),h=document.querySelector("[data-new-task-description-input]"),w=document.querySelector("[data-new-task-dueDate-input]"),E=document.querySelector("[data-new-task-priority-input]"),j=document.querySelector("[data-clear-complete-tasks-button]");(()=>{let e=document.querySelector("#showAddProjectFormBtn"),t=document.querySelector("#addProjectFormContainer"),n=document.querySelector("#projectFormCancelBtn");e.addEventListener("click",(()=>{t.classList.remove("hidden")})),n.addEventListener("click",(()=>{t.classList.add("hidden")}))})(),(()=>{let e=document.querySelector("#showAddTaskFormBtn"),t=document.querySelector("#addTaskFormContainer"),n=document.querySelector("#taskFormCancelBtn");e.addEventListener("click",(()=>{t.classList.remove("hidden")})),n.addEventListener("click",(()=>{t.classList.add("hidden")}))})(),q.addEventListener("submit",(e=>{e.preventDefault();const t=v.value;if(null==t||""===t)return;const a=(r=t,{id:Date.now().toString(),name:r,tasks:[]});var r;v.value=null,n.push(a),o()})),L.addEventListener("submit",(e=>{e.preventDefault();const t=g.value,r=h.value,d=w.value,c=E.value;if(document.querySelector("#templateTaskDiv"),null==t||""===t||null==r||""===r||null==d||""===d||null==c||""===c)return;const l=(i=t,s=r,u=d,m=c,{id:Date.now().toString(),name:i,description:s,dueDate:u,priority:m,complete:!1});var i,s,u,m;g.value=null,h.value=null,w.value=null,E.value=null,n.find((e=>e.id===a)).tasks.push(l),o()})),f.addEventListener("click",(e=>{n=n.filter((e=>e.id!==a)),a=null,o()})),i.addEventListener("click",(e=>{if("input"===e.target.tagName.toLowerCase()){const t=n.find((e=>e.id===a));t.tasks.find((t=>t.id===e.target.id)).complete=e.target.checked,r(),k(t)}})),j.addEventListener("click",(e=>{const t=n.find((e=>e.id===a));t.tasks=t.tasks.filter((e=>!e.complete)),o()})),y()})();