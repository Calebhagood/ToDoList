(()=>{"use strict";const e="task.myProjects",t="task.selectedProjectId";let o=JSON.parse(localStorage.getItem(e))||[],r=localStorage.getItem(t);function c(){localStorage.setItem(e,JSON.stringify(o)),localStorage.setItem(t,r),m()}const n=document.querySelector("[data-task-display-container]"),d=document.querySelector("[data-list-title]"),a=document.querySelector("[data-list-count]"),l=document.querySelector("[data-tasks]"),s=document.querySelector("[data-add-task-button]"),i=document.getElementById("task-template");let u=document.querySelector("#createdProjects");function m(){y(u),o.forEach((e=>{const t=document.createElement("li");t.dataset.projectId=e.id,t.setAttribute("class","projectItem"),t.innerText=e.name,e.id===r&&t.classList.add("selected"),u.appendChild(t)})),u.addEventListener("click",(e=>{"li"===e.target.tagName.toLowerCase()&&(r=e.target.dataset.projectId,c())}));const e=o.find((e=>e.id===r));null==r?(n.style.display="none",s.style.display="none"):(n.style.display="",s.style.display="",d.innerText=e.name,function(e){const t=e.tasks.filter((e=>!e.complete)).length,o=1===t?"task":"tasks";a.innerText=`${t} ${o} remaining`}(e),y(l),function(e){e.tasks.forEach((e=>{const t=document.importNode(i.contentEditable,!0),o=t.querySelector(".checkbox");o.id=e.id,o.checked=e.complete,t.querySelector(".title"),t.querySelector(".description"),t.querySelector(".projectName"),t.querySelector(".dueDate"),t.querySelector(".priority"),t.querySelector(".icons")}))}(e))}function y(e){for(;e.firstChild;)e.removeChild(e.firstChild)}const S=document.querySelector("[data-new-project-form]"),p=document.querySelector("[data-new-project-input]"),k=document.querySelector("[data-delete-project-button]");(()=>{let e=document.querySelector("#showAddProjectFormBtn"),t=document.querySelector("#addProjectFormContainer"),o=document.querySelector("#projectFormCancelBtn");e.addEventListener("click",(()=>{t.classList.remove("hidden")})),o.addEventListener("click",(()=>{t.classList.add("hidden")}))})(),(()=>{let e=document.querySelector("#showAddTaskFormBtn"),t=document.querySelector("#addTaskFormContainer"),o=document.querySelector("#taskFormCancelBtn");e.addEventListener("click",(()=>{t.classList.remove("hidden")})),o.addEventListener("click",(()=>{t.classList.add("hidden")}))})(),S.addEventListener("submit",(e=>{e.preventDefault();const t=p.value;if(null==t||""===t)return;const r=(n=t,{id:Date.now().toString(),name:n,tasks:[]});var n;p.value=null,o.push(r),c()})),k.addEventListener("click",(e=>{o=o.filter((e=>e.id!==r)),r=null,c()})),m()})();